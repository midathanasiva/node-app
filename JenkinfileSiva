pipeline {
     agent any
     environment {
     DOCKER_TAG = getDockerTag()
     
     }
     stages {
       stage("Build docker image")
       {
          steps {
                
                sh "docker build . -t rvnjssss/nodeapp:${DOCKER_TAG}"
                
                
          }
          
       
       }
     }
     
}

def getDockerTag()
{
def tag = sh script: 'get rev-parse HEAD', returnStdout: true
return tag
}
